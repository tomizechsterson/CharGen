version: 0.1.{build}

branches:
  only:
    - master
    
image: Visual Studio 2017

clone_folder: c:\projects\CharGen

matrix:
  fast_finish: true
  
build:
  parallel: true
  project: CharGen.sln
  publish_wap_xcopy: true
  verbosity: minimal

before_build:
  - cmd: dotnet restore
  
test:
  assemblies:
    only:
      - CharGen.UnitTests.dll
      
after_test:
- cmd: dotnet publish ADD2CharacterService -c Release -o ./publish
      
artifacts:
- path: ADD2CharacterService/publish
  name: publish
      
deploy:
- provider: AzureAppServiceZipDeploy
  appservice_environment: false
  website: chargendev
  slot: dev
  username: tomideploy4343__77
  password:
    secure: oKbhRae+jXWP252XnI9DCsM8Jpiml0w6UN7NiT2GfEA=
  artifact: publish